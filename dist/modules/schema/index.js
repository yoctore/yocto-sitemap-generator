/* yocto-sitemap-generator - Module that generate sitemap.xml - V0.1.0 */
"use strict";function Schema(a){this.logger=a}var logger=require("yocto-logger"),_=require("lodash"),utils=require("yocto-utils"),Q=require("q"),joi=require("joi");Schema.prototype.validate=function(a,b){var c=Q.defer();this.logger.debug("[ Schema.validate ] - validate schema for schemaName = "+b);var d=joi.validate(a,this.getSchema(b));return _.isEmpty(d.error)?c.resolve(d.value):(this.logger.error("[ Schema.validate ] - joi validation failed, details : "+utils.obj.inspect(d.error)),c.reject(d.error)),c.promise},Schema.prototype.getSchema=function(a){var b=joi.object().optional().keys({changeFreq:joi.string().empty().allow(["always","hourly","daily","weekly","monthly","yearly","never"]),priority:joi.number().optional().min(0).max(1),lastmod:joi.string().optional().trim().empty()}).default({}),c={paramsRules:joi.object().optional().keys({changeFreq:joi.string().empty().allow(["always","hourly","daily","weekly","monthly","yearly","never"]),priority:joi.number().optional().min(0).max(1),lastmod:joi.string().optional().trim().empty()}).default({}),load:joi.object().required().keys({generator:joi.object().required().keys({url:joi.string().trim().required().empty(),options:joi.object().optional().keys({restrictToBasepath:joi.boolean().optional(),stripQuerystring:joi.boolean().optional()}).default({})}),rules:joi.object().optional().keys({default:joi.object().optional().keys({params:b}).default({params:{}}),override:joi.array().optional().items(joi.object().keys({regex:joi.string().required().trim().empty(),params:b})).default([]),exclude:joi.array().optional().items(joi.string().trim().empty()).default([])})})};return c[a]},module.exports=function(a){return(_.isUndefined(a)||_.isNull(a))&&(logger.warning("[ Schema.constructor ] - Invalid logger given. Use internal logger"),a=logger),new Schema(a)};