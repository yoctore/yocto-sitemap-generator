/* yocto-sitemap-generator - Module that generate sitemap.xml - V0.1.0 */
"use strict";function Scheduler(a){this.logger=a}var logger=require("yocto-logger"),_=require("lodash"),utils=require("yocto-utils"),Q=require("q"),schedule=require("node-schedule");Scheduler.prototype.enable=function(a,b){var c=Q.defer();return this.logger.info("[ Scheduler.enable ] - Before instanciate Scheduler generate first sitemap "),b.process(!0).then(function(){this.logger.info("[ Scheduler.enable ] - First sitemap was correctly generated, now  instanciate scheduler"),schedule.scheduleJob(a.cronRule,function(){this.logger.info("[ Scheduler.job ] - Auto-Genarting sitemap start ..."),b.process(!0)}.bind(this)),c.resolve(!0)}.bind(this)).catch(function(a){this.logger.error("[ Scheduler.enable ] - first generating failed, so scheduler was not instanciate, more details : "+utils.obj.inspect(a)),c.reject(a)}.bind(this)),c.promise},module.exports=function(a){return(_.isUndefined(a)||_.isNull(a))&&(logger.warning("[ Scheduler.constructor ] - Invalid logger given. Use internal logger"),a=logger),new Scheduler(a)};